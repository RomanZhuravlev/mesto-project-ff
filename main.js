(()=>{"use strict";var e=["inputSelector","submitButtonSelector"],t=["formSelector"];function n(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=function(e,t,n){var r=n.inputErrorClass,o=n.errorClass,c=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(r),c.classList.remove(o),c.textContent=""},o=function(e,t,n){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.classList.remove(n),t.disabled=!1):(t.classList.add(n),t.disabled=!0)};function c(e,t){!function(e,t){var n=t.inputSelector,c=t.submitButtonSelector,a=t.inactiveButtonClass,i=Array.from(e.querySelectorAll(n)),u=e.querySelector(c);o(i,u,a),i.forEach((function(n){r(e,n,t)}))}(e.querySelector(".popup__form"),t),e.classList.add("popup_is-opened"),document.addEventListener("keydown",i)}function a(e){e.classList.remove("popup_is-opened"),document.removeEventListener("keydown",i)}function i(e){"Escape"===e.key&&a(document.querySelector(".popup_is-opened"))}var u={baseUrl:"https://nomoreparties.co/v1/wff-cohort-7",headers:{authorization:"dfd432e7-8dee-4b29-8ba8-64f22dc5eee3","Content-Type":"application/json"}};function l(e){return e.ok?e.json():e.json().then((function(t){return t.httpResponseCode=e.status,Promise.reject(t)}))}function s(e){return fetch("".concat(u.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:u.headers}).then(l)}var d=document.querySelector("#card-template").content,p=document.querySelector(".popup_type_image"),f=p.querySelector(".popup__image"),m=p.querySelector(".popup__caption");function y(e,t,n,r){var o=d.querySelector(".card").cloneNode(!0),c=o.querySelector(".card__delete-button"),a=o.querySelector(".card__image"),i=o.querySelector(".card__like-button"),s=o.querySelector(".card__like-counter");function p(e){s.textContent=e.likes.length,e.likes.some((function(e){return e._id===t}))?i.classList.add("card__like-button_is-active"):i.classList.remove("card__like-button_is-active")}return o.querySelector(".card__title").textContent=e.name,a.src=e.link,a.alt=e.name,t===e.ownerId?c.addEventListener("click",(function(){n(e.cardId).then((function(){o.remove()})).catch((function(e){return console.log(e)}))})):c.remove(),p(e),i.addEventListener("click",(function(){var t,n;(t=e.cardId,n=i.classList.contains("card__like-button_is-active"),fetch("".concat(u.baseUrl,"/cards/likes/").concat(t),{method:n?"DELETE":"PUT",headers:u.headers}).then(l)).then((function(e){p(e)})).catch((function(e){return console.log(e)}))})),a.addEventListener("click",(function(){return r(e.link,e.name)})),o}function _(e,t){f.src=e,f.alt=t,m.textContent=t,p.classList.add("popup_is-opened"),document.addEventListener("keydown",i)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h,b=document.querySelector(".places__list"),S=document.querySelector(".profile__edit-button"),k=document.querySelector(".profile__add-button"),q=document.querySelector(".profile__title"),C=document.querySelector(".profile__description"),g=document.querySelector(".profile__image"),E=document.querySelector(".popup_type_edit"),L=E.querySelector(".popup__input_type_name"),x=E.querySelector(".popup__input_type_description"),w=E.querySelector(".popup__button"),O=document.querySelector(".popup_type_new-card"),A=O.querySelector(".popup__button"),j=document.querySelector(".popup_type_edit-avatar"),I=j.querySelector(".popup__button"),U=document.forms["edit-profile"],P=U.elements.name,T=U.elements.description,B=document.forms["new-place"],D=B.elements["place-name"],N=B.elements.link,J=document.forms["edit-avatar"],M=J.elements.link,H=document.querySelectorAll(".popup"),V={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};H.forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_is-opened")&&a(e),t.target.classList.contains("popup__close")&&a(e)}))})),S.addEventListener("click",(function(){L.value=q.textContent,x.value=C.textContent,c(E,V)})),k.addEventListener("click",(function(){c(O,V)})),g.addEventListener("click",(function(){M.value="",c(j,V)})),U.addEventListener("submit",(function(e){var t,n;e.preventDefault(),w.textContent="Сохранить...",(t=P.value,n=T.value,fetch("".concat(u.baseUrl,"/users/me"),{method:"PATCH",headers:u.headers,body:JSON.stringify({name:t,about:n})}).then(l)).then((function(e){q.textContent=e.name,C.textContent=e.about,a(E)})).catch((function(e){return console.log(e)})).finally((function(){w.textContent="Сохранить"}))})),B.addEventListener("submit",(function(e){var t,n;e.preventDefault(),A.textContent="Сохранить...",(t=D.value,n=N.value,fetch("".concat(u.baseUrl,"/cards"),{method:"POST",headers:u.headers,body:JSON.stringify({name:t,link:n})}).then(l)).then((function(e){var t={name:e.name,link:e.link,likes:e.likes,cardId:e._id,ownerId:e.owner._id};b.prepend(y(t,h,s,_)),a(O),B.reset()})).catch((function(e){return console.log(e)})).finally((function(){A.textContent="Сохранить"}))})),J.addEventListener("submit",(function(e){var t;e.preventDefault(),I.textContent="Сохранить...",(t=M.value,fetch("".concat(u.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:u.headers,body:JSON.stringify({avatar:t})}).then(l)).then((function(e){g.style.backgroundImage="url(".concat(e.avatar,")"),a(j)})).catch((function(e){return console.log(e)})).finally((function(){I.textContent="Сохранить"}))})),function(c){var a=c.formSelector,i=n(c,t);Array.from(document.querySelectorAll(a)).forEach((function(t){!function(t,c){var a=c.inputSelector,i=c.submitButtonSelector,u=n(c,e),l=Array.from(t.querySelectorAll(a)),s=t.querySelector(i);o(l,s),l.forEach((function(e){e.addEventListener("input",(function(){!function(e,t,n){t.validity.patternMismatch?t.setCustomValidity("Разрешены только латинские, кириллические буквы, знаки дефиса и пробелы"):t.setCustomValidity(""),t.validity.valid?r(e,t,n):function(e,t,n,r){var o=r.inputErrorClass,c=r.errorClass,a=e.querySelector(".".concat(t.id,"-error"));t.classList.add(o),a.textContent=n,a.classList.add(c)}(e,t,t.validationMessage,n)}(t,e,u),o(l,s,u.inactiveButtonClass)}))}))}(t,i)}))}(V),Promise.all([fetch("".concat(u.baseUrl,"/users/me"),{headers:u.headers}).then(l),fetch("".concat(u.baseUrl,"/cards"),{headers:u.headers}).then(l)]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,i=[],u=!0,l=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],c=r[1];q.textContent=o.name,C.textContent=o.about,g.style.backgroundImage="url(".concat(o.avatar,")"),h=o._id,c.forEach((function(e){var t={name:e.name,link:e.link,likes:e.likes,cardId:e._id,ownerId:e.owner._id};b.append(y(t,h,s,_))}))})).catch((function(e){return console.log(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJLElBQUFDLEcsRUFBQSxFLDRDQUFBRCxJLG8yQkFBckJFLEVBQVFELEVBQUEsR0FBRUUsRUFBS0YsRUFBQSxHQUNyQnJELEVBQWF0RixZQUFjNEksRUFBU3hFLEtBQ3BDbUIsRUFBbUJ2RixZQUFjNEksRUFBU3ZCLE1BQzFDN0IsRUFBV21DLE1BQU1DLGdCQUFrQixPQUFIaEksT0FBVWdKLEVBQVNsQixPQUFNLEtBQ3pEeEMsRUFBTzBELEVBQVN6RSxJQUVoQjBFLEVBQU0xSCxTQUFRLFNBQUM0QyxHQUNiLElBQU1YLEVBQVcsQ0FDZmdCLEtBQU1MLEVBQUtLLEtBQ1hFLEtBQU1QLEVBQUtPLEtBQ1hOLE1BQU9ELEVBQUtDLE1BQ1pTLE9BQVFWLEVBQUtJLElBQ2JLLFFBQVNULEVBQUt3RCxNQUFNcEQsS0FFdEJnQixFQUFnQjJELE9BQU8zRixFQUFXQyxFQUFVOEIsRUFBTXZDLEVBQVlxQyxHQUNoRSxHQUNGLElBQ0NOLE9BQU0sU0FBQ3BDLEdBQUssT0FBS3FDLFFBQVFDLElBQUl0QyxFQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1mZi8uL3NyYy9zY3JpcHRzL2FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWZmLy4vc3JjL3NjcmlwdHMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g0L/QvtC60LDQtyDQvtGI0LjQsdC+0LpcclxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoXHJcbiAgZm9ybUVsZW1lbnQsXHJcbiAgaW5wdXRFbGVtZW50LFxyXG4gIGVycm9yTWVzc2FnZSxcclxuICB2YWxpZGF0aW9uQ29uZmlnXHJcbikgPT4ge1xyXG4gIGNvbnN0IHsgaW5wdXRFcnJvckNsYXNzLCBlcnJvckNsYXNzIH0gPSB2YWxpZGF0aW9uQ29uZmlnO1xyXG4gIGNvbnN0IGVycm9yRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxufTtcclxuXHJcbi8vINGB0LrRgNGL0YLQuNC1INC+0YjQuNCx0L7QulxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgY29uc3QgeyBpbnB1dEVycm9yQ2xhc3MsIGVycm9yQ2xhc3MgfSA9IHZhbGlkYXRpb25Db25maWc7XHJcbiAgY29uc3QgZXJyb3JFbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxufTtcclxuXHJcbi8vINC/0YDQvtCy0LXRgNC60LAg0LjQvdC/0YPRgtCwINC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcclxuY29uc3QgY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHZhbGlkYXRpb25Db25maWcpID0+IHtcclxuICAvLyDQv9GA0L7QstC10YDQutCwINGA0LXQs9GD0LvRj9GA0L3Ri9C8INCy0YvRgNCw0LbQtdC90LjQtdC8XHJcbiAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS5wYXR0ZXJuTWlzbWF0Y2gpIHtcclxuICAgIGlucHV0RWxlbWVudC5zZXRDdXN0b21WYWxpZGl0eShcclxuICAgICAgXCLQoNCw0LfRgNC10YjQtdC90Ysg0YLQvtC70YzQutC+INC70LDRgtC40L3RgdC60LjQtSwg0LrQuNGA0LjQu9C70LjRh9C10YHQutC40LUg0LHRg9C60LLRiywg0LfQvdCw0LrQuCDQtNC10YTQuNGB0LAg0Lgg0L/RgNC+0LHQtdC70YtcIlxyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaW5wdXRFbGVtZW50LnNldEN1c3RvbVZhbGlkaXR5KFwiXCIpO1xyXG4gIH1cclxuICAvLyDQvtCx0YnQsNGPINC/0YDQvtCy0LXRgNC60LBcclxuICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgc2hvd0lucHV0RXJyb3IoXHJcbiAgICAgIGZvcm1FbGVtZW50LFxyXG4gICAgICBpbnB1dEVsZW1lbnQsXHJcbiAgICAgIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSxcclxuICAgICAgdmFsaWRhdGlvbkNvbmZpZ1xyXG4gICAgKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g0L/RgNC+0LLQtdGA0LrQsCDQvdCwINC90LXQstCw0LvQuNC00L3Ri9C1INC40L3Qv9GD0YLRi1xyXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XHJcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8g0YHQvNC10L3QsCDRgdC+0YHRgtC+0Y/QvdC40Y8g0LrQvdC+0L/QutC4IHN1Ym1pdFxyXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpID0+IHtcclxuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChpbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuLy8g0L7QsdGF0L7QtCDQuCDQvtCx0YDQsNCx0L7RgtC60LAg0LLRgdC10YUg0LjQvdC/0YPRgtC+0LJcclxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsZW1lbnQsIGZvcm1Db25maWcpID0+IHtcclxuICBjb25zdCB7IGlucHV0U2VsZWN0b3IsIHN1Ym1pdEJ1dHRvblNlbGVjdG9yLCAuLi52YWxpZGF0aW9uQ29uZmlnIH0gPVxyXG4gICAgZm9ybUNvbmZpZzsgLy8g0L/RgNC+0LTQvtC70LbQsNC10Lwg0LTQtdGB0YLRgNGD0LrRgtGD0YDQuNGA0L7QstCw0YLRjCDQvtCx0YrQtdC60YJcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTsgLy8g0YHRgNCw0LfRgyDQv9GA0L7QstC10YDRj9C10Lwg0LjQvdC/0YPRgtGLINC4INC10YHQu9C4INC90YPQttC90L4g0LzQtdC90Y/QtdC8INGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60LhcclxuXHJcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTsgLy8g0L/QvtGB0LvQtSDQutCw0LbQtNC+0LPQviDQstC30LDQuNC8LdGPINGBINC40L3Qv9GD0YLQsNC80Lgg0L/RgNC+0LLQtdGA0Y/QtdC8INC90LAg0LLQsNC70LjQtNC90L7RgdGC0YxcclxuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoXHJcbiAgICAgICAgaW5wdXRMaXN0LFxyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQsXHJcbiAgICAgICAgdmFsaWRhdGlvbkNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICAgICk7IC8vINC/0L7RgdGC0L7Rj9C90L3QviDQv9GA0L7QstC10YDRj9C10Lwg0LjQvdC/0YPRgtGLINC4INC80LXQvdGP0LXQvCDRgdGC0LDRgtGD0YEg0LrQvdC+0L/QutC4INC10YHQu9C4INC90YPQttC90L5cclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLy8g0L7QsdGF0L7QtCDQuCDQvtCx0YDQsNCx0L7RgtC60LAg0LLRgdC10YUg0YTQvtGA0LxcclxuY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9ICh2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgLy8g0L7QsdGA0LDQsdC+0YLQutCwINC60L7QvdGE0LjQs9CwINC00LXQu9Cw0LXRgiDRhC3QuNGOINGD0L3QuNCy0LXRgNGB0LDQu9GM0L3QvtC5XHJcbiAgY29uc3QgeyBmb3JtU2VsZWN0b3IsIC4uLmZvcm1Db25maWcgfSA9IHZhbGlkYXRpb25Db25maWc7IC8vINGBINC/0L7QvNC+0YnRjNGOINC00LXRgdGC0YDRg9C60YLRg9GA0LjQt9Cw0YbQuNC4INGA0LDQsdC+0YLQsNC10Lwg0YEg0L7QsdGK0LXQutGC0L7QvFxyXG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1TZWxlY3RvcikpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgZm9ybUNvbmZpZyk7IC8vINC/0LXRgNC10LTQsNC10Lwg0LjQt9C80LXQvdC10L3QvdGL0Lkg0L7QsdGK0LXQutGCINCyINGB0LvQtdC00YPRjtGJ0YPRjiDRhC3QuNGOXHJcbiAgfSk7XHJcbn07XHJcblxyXG4vLyDQvtGH0LjRgdGC0LrQsCDQvtGI0LjQsdC+0LpcclxuY29uc3QgY2xlYXJWYWxpZGF0aW9uID0gKHByb2ZpbGVGb3JtLCB2YWxpZGF0aW9uQ29uZmlnKSA9PiB7XHJcbiAgY29uc3QgeyBpbnB1dFNlbGVjdG9yLCBzdWJtaXRCdXR0b25TZWxlY3RvciwgaW5hY3RpdmVCdXR0b25DbGFzcyB9ID1cclxuICAgIHZhbGlkYXRpb25Db25maWc7IC8vINC00LXRgdGC0YDRg9C60YLRg9GA0LjRgNGD0LXQvCDQvtCx0YrQtdC60YJcclxuICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKHByb2ZpbGVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBwcm9maWxlRm9ybS5xdWVyeVNlbGVjdG9yKHN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGluYWN0aXZlQnV0dG9uQ2xhc3MpOyAvLyDQvNC10L3Rj9C10Lwg0YHQvtGB0YLQvtGP0L3QuNC1INC60L3QvtC/0LrQuFxyXG5cclxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAvLyDQvtCx0YXQvtC00LjQvCDQstGB0LUg0LjQvdC/0YPRgtGLINC4INGB0LrRgNGL0LLQsNC10Lwg0L7RiNC40LHQutC4XHJcbiAgICBoaWRlSW5wdXRFcnJvcihwcm9maWxlRm9ybSwgaW5wdXRFbGVtZW50LCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIGNsZWFyVmFsaWRhdGlvbiB9O1xyXG4iLCJpbXBvcnQgeyBjbGVhclZhbGlkYXRpb24gfSBmcm9tIFwiLi92YWxpZGF0aW9uXCI7XHJcblxyXG5mdW5jdGlvbiBzaG93UG9wdXAocG9wdXBUb09wZW4sIHZhbGlkYXRpb25Db25maWcpIHtcclxuXHRjb25zdCBmb3JtID0gcG9wdXBUb09wZW4ucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgY2xlYXJWYWxpZGF0aW9uKGZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG5cclxuICBwb3B1cFRvT3Blbi5jbGFzc0xpc3QuYWRkKFwicG9wdXBfaXMtb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlUG9wdXAocG9wdXApIHtcclxuICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfaXMtb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XHJcbn1cclxuXHJcbi8vINC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwIEVzYyfQvtC8XHJcbmZ1bmN0aW9uIGhhbmRsZUVzY2FwZShldmVudCkge1xyXG4gIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9pcy1vcGVuZWRcIik7XHJcbiAgICBjbG9zZVBvcHVwKG9wZW5lZFBvcHVwKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IHNob3dQb3B1cCwgY2xvc2VQb3B1cCwgaGFuZGxlRXNjYXBlIH07XHJcbiIsImNvbnN0IGNvbmZpZyA9IHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vbm9tb3JlcGFydGllcy5jby92MS93ZmYtY29ob3J0LTdcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImRmZDQzMmU3LThkZWUtNGIyOS04YmE4LTY0ZjIyZGM1ZWVlM1wiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufTtcclxuXHJcbi8vINC/0YDQvtCy0LXRgNC60LAg0L7RgtCy0LXRgtCwXHJcbmZ1bmN0aW9uIGNoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgaWYgKHJlcy5vaykge1xyXG4gICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gcmVzXHJcbiAgICAuanNvbigpIC8vINCy0YvRgtCw0YnQuNC8INC+0YLQstC10YIg0YHQtdGA0LLQtdGA0LBcclxuICAgIC50aGVuKChlcnJvcikgPT4ge1xyXG4gICAgICBlcnJvci5odHRwUmVzcG9uc2VDb2RlID0gcmVzLnN0YXR1cztcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gIH0pLnRoZW4oY2hlY2tSZXNwb25zZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDYXJkcygpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgfSkudGhlbihjaGVja1Jlc3BvbnNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGVkaXRQcm9maWxlKG5hbWUsIGpvYikge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICBhYm91dDogam9iLFxyXG4gICAgfSksXHJcbiAgfSkudGhlbihjaGVja1Jlc3BvbnNlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgIGxpbms6IGxpbmssXHJcbiAgICB9KSxcclxuICB9KS50aGVuKGNoZWNrUmVzcG9uc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2FyZChpZCkge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICB9KS50aGVuKGNoZWNrUmVzcG9uc2UpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlTGlrZShpZCwgaXNMaWtlZCkge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vY2FyZHMvbGlrZXMvJHtpZH1gLCB7XHJcbiAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gIH0pLnRoZW4oY2hlY2tSZXNwb25zZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBlZGl0QXZhdGFyKGF2YXRhcikge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYXZhdGFyOiBhdmF0YXIsXHJcbiAgICB9KSxcclxuICB9KS50aGVuKGNoZWNrUmVzcG9uc2UpO1xyXG59XHJcbiIsImltcG9ydCB7IGhhbmRsZUVzY2FwZSB9IGZyb20gXCIuL21vZGFsXCI7XHJcbmltcG9ydCB7IHRvZ2dsZUxpa2UgfSBmcm9tIFwiLi9hcGlcIjtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKS5jb250ZW50O1xyXG5jb25zdCBpbWFnZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5jb25zdCBwb3B1cEltYWdlID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuY29uc3QgcG9wdXBDYXB0aW9uID0gaW1hZ2VQb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSwgbXlVc2VySWQsIG9uUmVtb3ZlLCBvblpvb20pIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xyXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcclxuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICBjb25zdCBjYXJkTGlrZUNvdW50ZXIgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtY291bnRlclwiKTtcclxuXHJcbiAgY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IGNhcmREYXRhLm5hbWU7XHJcbiAgY2FyZEltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XHJcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XHJcblxyXG4gIC8vINCy0LXRiNCw0LXQvCDQuNC60L7QvdC60Lgg0LzRg9GB0L7RgNC60Lgg0YLQvtC70YzQutC+INC90LAg0YHQvtC30LTQsNC90L3Ri9C1INC90LDQvNC4INC60LDRgNGC0L7Rh9C60LhcclxuICBpZiAobXlVc2VySWQgPT09IGNhcmREYXRhLm93bmVySWQpIHtcclxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAvLyDRg9C00LDQu9C10L3QuNC1INGBINGB0LXRgNCy0LXRgNCwXHJcbiAgICAgIG9uUmVtb3ZlKGNhcmREYXRhLmNhcmRJZClcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAvLyDRg9C00LDQu9C10L3QuNC1INC40LcgRE9NXHJcbiAgICAgICAgICByZW1vdmVDYXJkKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgZGVsZXRlQnV0dG9uLnJlbW92ZSgpOyAvLyDQtdGB0LvQuCDQutCw0YDRgtCwINC90LUg0L3QsNGI0LAgLSDRg9C00LDQu9GP0LXQvCDQuNC60L7QvdC60YNcclxuICB9XHJcblxyXG4gIC8vINC+0LHRgNCw0LHQvtGC0LrQsCDQu9Cw0LnQutC+0LJcclxuICBmdW5jdGlvbiByZW5kZXJMaWtlcyhjYXJkKSB7XHJcbiAgICBjYXJkTGlrZUNvdW50ZXIudGV4dENvbnRlbnQgPSBjYXJkLmxpa2VzLmxlbmd0aDsgLy8g0LLRi9Cy0L7QtNC40Lwg0YfQuNGB0LvQviDQu9Cw0LnQutC+0LIg0LIg0YHRh9C10YLRh9C40LpcclxuICAgIGlmIChjYXJkLmxpa2VzLnNvbWUoKGxpa2UpID0+IGxpa2UuX2lkID09PSBteVVzZXJJZCkpIHtcclxuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTsgLy8g0LXRgdC70Lgg0LzRiyDQu9Cw0LnQutCw0LvQuCDQutCw0YDRgtC+0YfQutGDIC0g0LvQsNC50Log0LfQsNC60YDQsNGI0LXQvVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2lzLWFjdGl2ZVwiKTsgLy8g0LXRgdC70Lgg0L3QtSDQu9Cw0LnQutCw0LvQuCAtINC70LDQudC6INC90LXQt9Cw0LrRgNCw0YjQtdC9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZW5kZXJMaWtlcyhjYXJkRGF0YSk7IC8vINC/0LXRgNCy0LjRh9C90LDRjyDQv9GA0L7QstC10YDQutCwXHJcblxyXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyDQsiDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQv9C10YDQtdC00LDQtdC8INGD0L3QuNCy0LXRgNGB0LDQu9GM0L3Rg9GOINGELdC40Y4g0LrQvtGC0L7RgNCw0Y8g0LzQvtC20LXRgiDQu9C40LHQviDRg9C00LDQu9GP0YLRjCwg0LvQuNCx0L4g0LLQvdC+0YHQuNGC0YxcclxuICAgIHRvZ2dsZUxpa2UoXHJcbiAgICAgIGNhcmREYXRhLmNhcmRJZCxcclxuICAgICAgY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idXR0b25faXMtYWN0aXZlXCIpXHJcbiAgICApXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgLy8g0LzQtdC90Y/QtdC8INGB0L7RgdGC0L7Rj9C90LjRjyDQv9C+0YHQu9C1INC+0YLQstC10YLQsCDRgdC10YDQstC10YDQsFxyXG4gICAgICAgIHJlbmRlckxpa2VzKGRhdGEpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4gIH0pO1xyXG5cclxuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICBvblpvb20oY2FyZERhdGEubGluaywgY2FyZERhdGEubmFtZSlcclxuICApO1xyXG5cclxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUNhcmQoY2FyZCkge1xyXG4gIGNhcmQucmVtb3ZlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHpvb21DYXJkKGNhcmRJbWFnZSwgY2FyZERlc2NyaXB0aW9uKSB7XHJcbiAgcG9wdXBJbWFnZS5zcmMgPSBjYXJkSW1hZ2U7XHJcbiAgcG9wdXBJbWFnZS5hbHQgPSBjYXJkRGVzY3JpcHRpb247XHJcbiAgcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZERlc2NyaXB0aW9uO1xyXG5cclxuICBpbWFnZVBvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9pcy1vcGVuZWRcIik7XHJcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcclxufVxyXG5cclxuZXhwb3J0IHsgY3JlYXRlQ2FyZCwgcmVtb3ZlQ2FyZCwgem9vbUNhcmQgfTtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUNhcmQsIHpvb21DYXJkIH0gZnJvbSBcIi4vY2FyZFwiO1xyXG5pbXBvcnQgeyBzaG93UG9wdXAsIGNsb3NlUG9wdXAgfSBmcm9tIFwiLi9tb2RhbFwiO1xyXG5pbXBvcnQgeyBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSBcIi4vdmFsaWRhdGlvblwiO1xyXG5pbXBvcnQge1xyXG4gIGdldFVzZXJJbmZvLFxyXG4gIGdldENhcmRzLFxyXG4gIGVkaXRQcm9maWxlLFxyXG4gIGFkZENhcmQsXHJcbiAgZGVsZXRlQ2FyZCxcclxuICBlZGl0QXZhdGFyLFxyXG59IGZyb20gXCIuL2FwaVwiO1xyXG5cclxuY29uc3QgcGxhY2VzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wbGFjZXNfX2xpc3RcIik7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IGhlYWRlckxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXRcIik7XHJcbmNvbnN0IHBvcHVwSW5wdXROYW1lID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgcG9wdXBJbnB1dERlc2NyaXB0aW9uID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxyXG4pO1xyXG5jb25zdCBwcm9maWxlUG9wdXBCdXR0b24gPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgY2FyZEFkZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX25ldy1jYXJkXCIpO1xyXG5jb25zdCBjYXJkQWRkUG9wdXBCdXR0b24gPSBjYXJkQWRkUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2VkaXQtYXZhdGFyXCIpO1xyXG5jb25zdCBlZGl0QXZhdGFyUG9wdXBCdXR0b24gPSBlZGl0QXZhdGFyUG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0LXByb2ZpbGVcIl07XHJcbmNvbnN0IGVkaXRGb3JtTmFtZUlucHV0ID0gZWRpdEZvcm1FbGVtZW50LmVsZW1lbnRzW1wibmFtZVwiXTtcclxuY29uc3QgZWRpdEZvcm1Kb2JJbnB1dCA9IGVkaXRGb3JtRWxlbWVudC5lbGVtZW50c1tcImRlc2NyaXB0aW9uXCJdO1xyXG5cclxuY29uc3QgYWRkRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wbGFjZVwiXTtcclxuY29uc3QgYWRkRm9ybU5hbWVJbnB1dCA9IGFkZEZvcm1FbGVtZW50LmVsZW1lbnRzW1wicGxhY2UtbmFtZVwiXTtcclxuY29uc3QgYWRkRm9ybUxpbmtJbnB1dCA9IGFkZEZvcm1FbGVtZW50LmVsZW1lbnRzW1wibGlua1wiXTtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1hdmF0YXJcIl07XHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtVXJsSW5wdXQgPSBlZGl0QXZhdGFyRm9ybUVsZW1lbnQuZWxlbWVudHNbXCJsaW5rXCJdO1xyXG5cclxuY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cFwiKTtcclxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbmxldCBteUlkOyAvLyDRgdGO0LTQsCDQstGL0YLQsNGJ0LjQvCDQt9C90LDRh9C10L3QuNC1INC40LcgZ2V0VXNlckluZm8oKSDQtNC70Y8g0LTQsNC70YzQvdC10LnRiNC10LPQviDQv9C10YDQtdC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPXHJcblxyXG4vLyDQvtCx0YrQtdC00LjQvdC10L3QuNC1INC+0LHRgNCw0LHQvtGC0YfQuNC60L7QsiDQvtCy0LXRgNC70LXRjyDQuCDQutGA0LXRgdGC0LjQutC+0LJcclxucG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XHJcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9pcy1vcGVuZWRcIikpIHtcclxuICAgICAgY2xvc2VQb3B1cChwb3B1cCk7IC8vINC/0YDQvtCy0LXRgNC60LAsINC90LDQttCw0LvQuCDQvdCwINC+0LLQtdGA0LvQtdC5INC40LvQuCDQvdC10YIsINC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbiAgICB9XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cF9fY2xvc2VcIikpIHtcclxuICAgICAgY2xvc2VQb3B1cChwb3B1cCk7IC8vINC/0YDQvtCy0LXRgNC60LAsINC90LDQttCw0LvQuCDQvdCwINC60YDQtdGB0YLQuNC6INC40LvQuCDQvdC10YIsINC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXHJcbiAgICB9XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cElucHV0TmFtZS52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudDtcclxuICBwb3B1cElucHV0RGVzY3JpcHRpb24udmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XHJcblxyXG4gIHNob3dQb3B1cChwcm9maWxlUG9wdXAsIHZhbGlkYXRpb25Db25maWcpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBzaG93UG9wdXAoY2FyZEFkZFBvcHVwLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxufSk7XHJcblxyXG5oZWFkZXJMb2dvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgZWRpdEF2YXRhckZvcm1VcmxJbnB1dC52YWx1ZSA9IFwiXCI7XHJcbiAgc2hvd1BvcHVwKGVkaXRBdmF0YXJQb3B1cCwgdmFsaWRhdGlvbkNvbmZpZyk7XHJcbn0pO1xyXG5cclxuLy8g0YHQu9GD0YjQsNGC0LXQu9GMINC/0YDQuCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNC4XHJcbmVkaXRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgcHJvZmlsZVBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YwuLi5cIjtcclxuXHJcbiAgZWRpdFByb2ZpbGUoZWRpdEZvcm1OYW1lSW5wdXQudmFsdWUsIGVkaXRGb3JtSm9iSW5wdXQudmFsdWUpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudCA9IHJlcy5uYW1lO1xyXG4gICAgICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSByZXMuYWJvdXQ7XHJcbiAgICAgIGNsb3NlUG9wdXAocHJvZmlsZVBvcHVwKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycm9yKSA9PiBjb25zb2xlLmxvZyhlcnJvcikpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHByb2ZpbGVQb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4vLyDRgdC70YPRiNCw0YLQtdC70Ywg0L/RgNC4INC00L7QsdCw0LLQu9C10L3QuNC4INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxyXG5hZGRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xyXG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY2FyZEFkZFBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YwuLi5cIjtcclxuXHJcbiAgYWRkQ2FyZChhZGRGb3JtTmFtZUlucHV0LnZhbHVlLCBhZGRGb3JtTGlua0lucHV0LnZhbHVlKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRGF0YSA9IHtcclxuICAgICAgICBuYW1lOiByZXMubmFtZSxcclxuICAgICAgICBsaW5rOiByZXMubGluayxcclxuICAgICAgICBsaWtlczogcmVzLmxpa2VzLFxyXG4gICAgICAgIGNhcmRJZDogcmVzLl9pZCxcclxuICAgICAgICBvd25lcklkOiByZXMub3duZXIuX2lkLFxyXG4gICAgICB9O1xyXG4gICAgICBwbGFjZXNDb250YWluZXIucHJlcGVuZChjcmVhdGVDYXJkKGNhcmREYXRhLCBteUlkLCBkZWxldGVDYXJkLCB6b29tQ2FyZCkpO1xyXG4gICAgICBjbG9zZVBvcHVwKGNhcmRBZGRQb3B1cCk7XHJcbiAgICAgIGFkZEZvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChyZXMpID0+IGNvbnNvbGUubG9nKHJlcykpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGNhcmRBZGRQb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMXCI7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5lZGl0QXZhdGFyRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcclxuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGVkaXRBdmF0YXJQb3B1cEJ1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LjRgtGMLi4uXCI7XHJcblxyXG4gIGVkaXRBdmF0YXIoZWRpdEF2YXRhckZvcm1VcmxJbnB1dC52YWx1ZSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgaGVhZGVyTG9nby5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7cmVzLmF2YXRhcn0pYDtcclxuICAgICAgY2xvc2VQb3B1cChlZGl0QXZhdGFyUG9wdXApO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdEF2YXRhclBvcHVwQnV0dG9uLnRleHRDb250ZW50ID0gXCLQodC+0YXRgNCw0L3QuNGC0YxcIjtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24odmFsaWRhdGlvbkNvbmZpZyk7IC8vINCy0LDQu9C40LDQtNCw0YbQuNGPXHJcblxyXG5Qcm9taXNlLmFsbChbZ2V0VXNlckluZm8oKSwgZ2V0Q2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VySW5mbywgY2FyZHNdKSA9PiB7XHJcbiAgICBwcm9maWxlVGl0bGUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8uYWJvdXQ7XHJcbiAgICBoZWFkZXJMb2dvLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt1c2VySW5mby5hdmF0YXJ9KWA7XHJcbiAgICBteUlkID0gdXNlckluZm8uX2lkO1xyXG5cclxuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcclxuICAgICAgY29uc3QgY2FyZERhdGEgPSB7XHJcbiAgICAgICAgbmFtZTogY2FyZC5uYW1lLFxyXG4gICAgICAgIGxpbms6IGNhcmQubGluayxcclxuICAgICAgICBsaWtlczogY2FyZC5saWtlcyxcclxuICAgICAgICBjYXJkSWQ6IGNhcmQuX2lkLFxyXG4gICAgICAgIG93bmVySWQ6IGNhcmQub3duZXIuX2lkLFxyXG4gICAgICB9O1xyXG4gICAgICBwbGFjZXNDb250YWluZXIuYXBwZW5kKGNyZWF0ZUNhcmQoY2FyZERhdGEsIG15SWQsIGRlbGV0ZUNhcmQsIHpvb21DYXJkKSk7XHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyb3IpID0+IGNvbnNvbGUubG9nKGVycm9yKSk7XHJcbiJdLCJuYW1lcyI6WyJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwidmFsaWRhdGlvbkNvbmZpZyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0IiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0ZXh0Q29udGVudCIsInRvZ2dsZUJ1dHRvblN0YXRlIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVkIiwiYWRkIiwic2hvd1BvcHVwIiwicG9wdXBUb09wZW4iLCJwcm9maWxlRm9ybSIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiY2xlYXJWYWxpZGF0aW9uIiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlRXNjYXBlIiwiY2xvc2VQb3B1cCIsInBvcHVwIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5IiwiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsInRoZW4iLCJlcnJvciIsImh0dHBSZXNwb25zZUNvZGUiLCJzdGF0dXMiLCJQcm9taXNlIiwicmVqZWN0IiwiZGVsZXRlQ2FyZCIsImZldGNoIiwibWV0aG9kIiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImltYWdlUG9wdXAiLCJwb3B1cEltYWdlIiwicG9wdXBDYXB0aW9uIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwibXlVc2VySWQiLCJvblJlbW92ZSIsIm9uWm9vbSIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiZGVsZXRlQnV0dG9uIiwiY2FyZEltYWdlIiwiY2FyZExpa2VCdXR0b24iLCJjYXJkTGlrZUNvdW50ZXIiLCJyZW5kZXJMaWtlcyIsImNhcmQiLCJsaWtlcyIsImxlbmd0aCIsImxpa2UiLCJfaWQiLCJuYW1lIiwic3JjIiwibGluayIsImFsdCIsIm93bmVySWQiLCJjYXJkSWQiLCJjYXRjaCIsImNvbnNvbGUiLCJsb2ciLCJpc0xpa2VkIiwiY29udGFpbnMiLCJkYXRhIiwiem9vbUNhcmQiLCJjYXJkRGVzY3JpcHRpb24iLCJteUlkIiwicGxhY2VzQ29udGFpbmVyIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlQWRkQnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiaGVhZGVyTG9nbyIsInByb2ZpbGVQb3B1cCIsInBvcHVwSW5wdXROYW1lIiwicG9wdXBJbnB1dERlc2NyaXB0aW9uIiwicHJvZmlsZVBvcHVwQnV0dG9uIiwiY2FyZEFkZFBvcHVwIiwiY2FyZEFkZFBvcHVwQnV0dG9uIiwiZWRpdEF2YXRhclBvcHVwIiwiZWRpdEF2YXRhclBvcHVwQnV0dG9uIiwiZWRpdEZvcm1FbGVtZW50IiwiZm9ybXMiLCJlZGl0Rm9ybU5hbWVJbnB1dCIsImVsZW1lbnRzIiwiZWRpdEZvcm1Kb2JJbnB1dCIsImFkZEZvcm1FbGVtZW50IiwiYWRkRm9ybU5hbWVJbnB1dCIsImFkZEZvcm1MaW5rSW5wdXQiLCJlZGl0QXZhdGFyRm9ybUVsZW1lbnQiLCJlZGl0QXZhdGFyRm9ybVVybElucHV0IiwicG9wdXBzIiwiZm9ybVNlbGVjdG9yIiwiZXZ0IiwidGFyZ2V0IiwidmFsdWUiLCJqb2IiLCJwcmV2ZW50RGVmYXVsdCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJmaW5hbGx5Iiwib3duZXIiLCJwcmVwZW5kIiwicmVzZXQiLCJhdmF0YXIiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImZvcm1Db25maWciLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJfZXhjbHVkZWQyIiwiX2V4Y2x1ZGVkIiwicGF0dGVybk1pc21hdGNoIiwic2V0Q3VzdG9tVmFsaWRpdHkiLCJlcnJvck1lc3NhZ2UiLCJzaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwiYWxsIiwiX3JlZiIsIl9yZWYyIiwidXNlckluZm8iLCJjYXJkcyIsImFwcGVuZCJdLCJzb3VyY2VSb290IjoiIn0=